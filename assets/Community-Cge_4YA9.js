<<<<<<<< HEAD:assets/Community-BYp-IzLB.js
var Ae=t=>{throw TypeError(t)};var xe=(t,e,s)=>e.has(t)||Ae("Cannot "+s);var a=(t,e,s)=>(xe(t,e,"read from private field"),s?s.call(t):e.get(t)),b=(t,e,s)=>e.has(t)?Ae("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),m=(t,e,s,i)=>(xe(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),f=(t,e,s)=>(xe(t,e,"access private method"),s);import{c as pe,a6 as tt,a7 as Ke,a8 as O,a9 as me,aa as oe,ab as fe,ac as Ce,ad as qe,ae as it,af as ue,ag as nt,ah as ot,ai as Be,aj as be,ak as He,al as lt,r as y,am as st,an as ke,u as ct,d as ht,j as r,N as ut,k as ge,C as ve,a as ye,a5 as $e,ao as dt,F as mt,f as J,t as re}from"./index-BhfWv0VC.js";import{T as ft}from"./textarea-COoyPxC2.js";import{A as ze,a as Ve,b as We}from"./avatar-DfU6dhp9.js";import"./index-D1tdNBpQ.js";/**
========
var Ae=t=>{throw TypeError(t)};var xe=(t,e,s)=>e.has(t)||Ae("Cannot "+s);var a=(t,e,s)=>(xe(t,e,"read from private field"),s?s.call(t):e.get(t)),b=(t,e,s)=>e.has(t)?Ae("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),m=(t,e,s,i)=>(xe(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),f=(t,e,s)=>(xe(t,e,"access private method"),s);import{c as pe,a6 as tt,a7 as Ke,a8 as O,a9 as me,aa as oe,ab as fe,ac as Ce,ad as qe,ae as it,af as ue,ag as nt,ah as ot,ai as Be,aj as be,ak as He,al as lt,r as y,am as st,an as ke,u as ct,d as ht,j as r,N as ut,k as ge,C as ve,a as ye,a5 as $e,ao as dt,F as mt,f as J,t as re}from"./index-kKgKvGca.js";import{T as ft}from"./textarea-DmL84TE5.js";import{A as ze,a as Ve,b as We}from"./avatar-BCaCqlfA.js";import"./index-CpptMc8w.js";/**
>>>>>>>> 8681ca4751f5e74fed647ae1ddc923869338e221:assets/Community-Cge_4YA9.js
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],bt=pe("circle-plus",pt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],gt=pe("heart",xt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ge=pe("message-square",vt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ct=pe("trash-2",yt);var w,h,le,R,$,X,P,L,ce,Y,Z,z,V,A,ee,u,ne,je,Ne,Se,Re,we,Me,Ee,at,Ze,jt=(Ze=class extends tt{constructor(e,s){super();b(this,u);b(this,w);b(this,h);b(this,le);b(this,R);b(this,$);b(this,X);b(this,P);b(this,L);b(this,ce);b(this,Y);b(this,Z);b(this,z);b(this,V);b(this,A);b(this,ee,new Set);this.options=s,m(this,w,e),m(this,L,null),m(this,P,Ke()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(a(this,h).addObserver(this),Je(a(this,h),this.options)?f(this,u,ne).call(this):this.updateResult(),f(this,u,Re).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ie(a(this,h),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ie(a(this,h),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,f(this,u,we).call(this),f(this,u,Me).call(this),a(this,h).removeObserver(this)}setOptions(e){const s=this.options,i=a(this,h);if(this.options=a(this,w).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof O(this.options.enabled,a(this,h))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");f(this,u,Ee).call(this),a(this,h).setOptions(this.options),s._defaulted&&!me(this.options,s)&&a(this,w).getQueryCache().notify({type:"observerOptionsUpdated",query:a(this,h),observer:this});const o=this.hasListeners();o&&Xe(a(this,h),i,this.options,s)&&f(this,u,ne).call(this),this.updateResult(),o&&(a(this,h)!==i||O(this.options.enabled,a(this,h))!==O(s.enabled,a(this,h))||oe(this.options.staleTime,a(this,h))!==oe(s.staleTime,a(this,h)))&&f(this,u,je).call(this);const c=f(this,u,Ne).call(this);o&&(a(this,h)!==i||O(this.options.enabled,a(this,h))!==O(s.enabled,a(this,h))||c!==a(this,A))&&f(this,u,Se).call(this,c)}getOptimisticResult(e){const s=a(this,w).getQueryCache().build(a(this,w),e),i=this.createResult(s,e);return St(this,i)&&(m(this,R,i),m(this,X,this.options),m(this,$,a(this,h).state)),i}getCurrentResult(){return a(this,R)}trackResult(e,s){return new Proxy(e,{get:(i,o)=>(this.trackProp(o),s==null||s(o),o==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&a(this,P).status==="pending"&&a(this,P).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(i,o))})}trackProp(e){a(this,ee).add(e)}getCurrentQuery(){return a(this,h)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=a(this,w).defaultQueryOptions(e),i=a(this,w).getQueryCache().build(a(this,w),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(e){return f(this,u,ne).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),a(this,R)))}createResult(e,s){var U;const i=a(this,h),o=this.options,c=a(this,R),l=a(this,$),C=a(this,X),v=e!==i?e.state:a(this,le),{state:j}=e;let d={...j},I=!1,x;if(s._optimisticResults){const S=this.hasListeners(),D=!S&&Je(e,s),k=S&&Xe(e,i,s,o);(D||k)&&(d={...d,...ot(j.data,e.options)}),s._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:q,errorUpdatedAt:B,status:N}=d;x=d.data;let W=!1;if(s.placeholderData!==void 0&&x===void 0&&N==="pending"){let S;c!=null&&c.isPlaceholderData&&s.placeholderData===(C==null?void 0:C.placeholderData)?(S=c.data,W=!0):S=typeof s.placeholderData=="function"?s.placeholderData((U=a(this,Z))==null?void 0:U.state.data,a(this,Z)):s.placeholderData,S!==void 0&&(N="success",x=Be(c==null?void 0:c.data,S,s),I=!0)}if(s.select&&x!==void 0&&!W)if(c&&x===(l==null?void 0:l.data)&&s.select===a(this,ce))x=a(this,Y);else try{m(this,ce,s.select),x=s.select(x),x=Be(c==null?void 0:c.data,x,s),m(this,Y,x),m(this,L,null)}catch(S){m(this,L,S)}a(this,L)&&(q=a(this,L),x=a(this,Y),B=Date.now(),N="error");const te=d.fetchStatus==="fetching",G=N==="pending",se=N==="error",he=G&&te,ae=x!==void 0,g={status:N,fetchStatus:d.fetchStatus,isPending:G,isSuccess:N==="success",isError:se,isInitialLoading:he,isLoading:he,data:x,dataUpdatedAt:d.dataUpdatedAt,error:q,errorUpdatedAt:B,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>v.dataUpdateCount||d.errorUpdateCount>v.errorUpdateCount,isFetching:te,isRefetching:te&&!G,isLoadingError:se&&!ae,isPaused:d.fetchStatus==="paused",isPlaceholderData:I,isRefetchError:se&&ae,isStale:_e(e,s),refetch:this.refetch,promise:a(this,P),isEnabled:O(s.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const S=H=>{g.status==="error"?H.reject(g.error):g.data!==void 0&&H.resolve(g.data)},D=()=>{const H=m(this,P,g.promise=Ke());S(H)},k=a(this,P);switch(k.status){case"pending":e.queryHash===i.queryHash&&S(k);break;case"fulfilled":(g.status==="error"||g.data!==k.value)&&D();break;case"rejected":(g.status!=="error"||g.error!==k.reason)&&D();break}}return g}updateResult(){const e=a(this,R),s=this.createResult(a(this,h),this.options);if(m(this,$,a(this,h).state),m(this,X,this.options),a(this,$).data!==void 0&&m(this,Z,a(this,h)),me(s,e))return;m(this,R,s);const i=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,c=typeof o=="function"?o():o;if(c==="all"||!c&&!a(this,ee).size)return!0;const l=new Set(c??a(this,ee));return this.options.throwOnError&&l.add("error"),Object.keys(a(this,R)).some(C=>{const p=C;return a(this,R)[p]!==e[p]&&l.has(p)})};f(this,u,at).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&f(this,u,Re).call(this)}},w=new WeakMap,h=new WeakMap,le=new WeakMap,R=new WeakMap,$=new WeakMap,X=new WeakMap,P=new WeakMap,L=new WeakMap,ce=new WeakMap,Y=new WeakMap,Z=new WeakMap,z=new WeakMap,V=new WeakMap,A=new WeakMap,ee=new WeakMap,u=new WeakSet,ne=function(e){f(this,u,Ee).call(this);let s=a(this,h).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(fe)),s},je=function(){f(this,u,we).call(this);const e=oe(this.options.staleTime,a(this,h));if(Ce||a(this,R).isStale||!qe(e))return;const i=it(a(this,R).dataUpdatedAt,e)+1;m(this,z,ue.setTimeout(()=>{a(this,R).isStale||this.updateResult()},i))},Ne=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(a(this,h)):this.options.refetchInterval)??!1},Se=function(e){f(this,u,Me).call(this),m(this,A,e),!(Ce||O(this.options.enabled,a(this,h))===!1||!qe(a(this,A))||a(this,A)===0)&&m(this,V,ue.setInterval(()=>{(this.options.refetchIntervalInBackground||nt.isFocused())&&f(this,u,ne).call(this)},a(this,A)))},Re=function(){f(this,u,je).call(this),f(this,u,Se).call(this,f(this,u,Ne).call(this))},we=function(){a(this,z)&&(ue.clearTimeout(a(this,z)),m(this,z,void 0))},Me=function(){a(this,V)&&(ue.clearInterval(a(this,V)),m(this,V,void 0))},Ee=function(){const e=a(this,w).getQueryCache().build(a(this,w),this.options);if(e===a(this,h))return;const s=a(this,h);m(this,h,e),m(this,le,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},at=function(e){be.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(a(this,R))}),a(this,w).getQueryCache().notify({query:a(this,h),type:"observerResultsUpdated"})})},Ze);function Nt(t,e){return O(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Je(t,e){return Nt(t,e)||t.state.data!==void 0&&Ie(t,e,e.refetchOnMount)}function Ie(t,e,s){if(O(e.enabled,t)!==!1&&oe(e.staleTime,t)!=="static"){const i=typeof s=="function"?s(t):s;return i==="always"||i!==!1&&_e(t,e)}return!1}function Xe(t,e,s,i){return(t!==e||O(i.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&_e(t,s)}function _e(t,e){return O(e.enabled,t)!==!1&&t.isStaleByTime(oe(e.staleTime,t))}function St(t,e){return!me(t.getCurrentResult(),e)}var T,K,M,Q,F,de,Oe,et,Rt=(et=class extends tt{constructor(e,s){super();b(this,F);b(this,T);b(this,K);b(this,M);b(this,Q);m(this,T,e),this.setOptions(s),this.bindMethods(),f(this,F,de).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var i;const s=this.options;this.options=a(this,T).defaultMutationOptions(e),me(this.options,s)||a(this,T).getMutationCache().notify({type:"observerOptionsUpdated",mutation:a(this,M),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&He(s.mutationKey)!==He(this.options.mutationKey)?this.reset():((i=a(this,M))==null?void 0:i.state.status)==="pending"&&a(this,M).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=a(this,M))==null||e.removeObserver(this)}onMutationUpdate(e){f(this,F,de).call(this),f(this,F,Oe).call(this,e)}getCurrentResult(){return a(this,K)}reset(){var e;(e=a(this,M))==null||e.removeObserver(this),m(this,M,void 0),f(this,F,de).call(this),f(this,F,Oe).call(this)}mutate(e,s){var i;return m(this,Q,s),(i=a(this,M))==null||i.removeObserver(this),m(this,M,a(this,T).getMutationCache().build(a(this,T),this.options)),a(this,M).addObserver(this),a(this,M).execute(e)}},T=new WeakMap,K=new WeakMap,M=new WeakMap,Q=new WeakMap,F=new WeakSet,de=function(){var s;const e=((s=a(this,M))==null?void 0:s.state)??lt();m(this,K,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},Oe=function(e){be.batch(()=>{var s,i,o,c,l,C,p,v;if(a(this,Q)&&this.hasListeners()){const j=a(this,K).variables,d=a(this,K).context,I={client:a(this,T),meta:this.options.meta,mutationKey:this.options.mutationKey};(e==null?void 0:e.type)==="success"?((i=(s=a(this,Q)).onSuccess)==null||i.call(s,e.data,j,d,I),(c=(o=a(this,Q)).onSettled)==null||c.call(o,e.data,null,j,d,I)):(e==null?void 0:e.type)==="error"&&((C=(l=a(this,Q)).onError)==null||C.call(l,e.error,j,d,I),(v=(p=a(this,Q)).onSettled)==null||v.call(p,void 0,e.error,j,d,I))}this.listeners.forEach(j=>{j(a(this,K))})})},et),rt=y.createContext(!1),wt=()=>y.useContext(rt);rt.Provider;function Mt(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Et=y.createContext(Mt()),It=()=>y.useContext(Et),Ot=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},kt=t=>{y.useEffect(()=>{t.clearReset()},[t])},_t=({result:t,errorResetBoundary:e,throwOnError:s,query:i,suspense:o})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&(o&&t.data===void 0||st(s,[t.error,i])),Pt=t=>{if(t.suspense){const s=o=>o==="static"?o:Math.max(o??1e3,1e3),i=t.staleTime;t.staleTime=typeof i=="function"?(...o)=>s(i(...o)):s(i),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Tt=(t,e)=>t.isLoading&&t.isFetching&&!e,Qt=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Ye=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function Ft(t,e,s){var d,I,x,q,B;const i=wt(),o=It(),c=ke(),l=c.defaultQueryOptions(t);(I=(d=c.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||I.call(d,l),l._optimisticResults=i?"isRestoring":"optimistic",Pt(l),Ot(l,o),kt(o);const C=!c.getQueryCache().get(l.queryHash),[p]=y.useState(()=>new e(c,l)),v=p.getOptimisticResult(l),j=!i&&t.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(N=>{const W=j?p.subscribe(be.batchCalls(N)):fe;return p.updateResult(),W},[p,j]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),y.useEffect(()=>{p.setOptions(l)},[l,p]),Qt(l,v))throw Ye(l,p,o);if(_t({result:v,errorResetBoundary:o,throwOnError:l.throwOnError,query:c.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw v.error;if((q=(x=c.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||q.call(x,l,v),l.experimental_prefetchInRender&&!Ce&&Tt(v,i)){const N=C?Ye(l,p,o):(B=c.getQueryCache().get(l.queryHash))==null?void 0:B.promise;N==null||N.catch(fe).finally(()=>{p.updateResult()})}return l.notifyOnChangeProps?v:p.trackResult(v)}function Ut(t,e){return Ft(t,jt)}function ie(t,e){const s=ke(),[i]=y.useState(()=>new Rt(s,t));y.useEffect(()=>{i.setOptions(t)},[i,t]);const o=y.useSyncExternalStore(y.useCallback(l=>i.subscribe(be.batchCalls(l)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),c=y.useCallback((l,C)=>{i.mutate(l,C).catch(fe)},[i]);if(o.error&&st(i.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:c,mutateAsync:o.mutate}}const Bt=()=>{ct("community");const{user:t,role:e}=ht(),s=ke(),[i,o]=y.useState(""),[c,l]=y.useState(""),[C,p]=y.useState(!1),{data:v=[],isLoading:j}=Ut({queryKey:["posts"],queryFn:()=>J.getPosts()}),d=ie({mutationFn:({title:n,body:g,userId:U})=>J.createPost(n,g,U),onSuccess:()=>{s.invalidateQueries({queryKey:["posts"]}),o(""),l(""),p(!1),re.success("Post created successfully!")},onError:n=>{re.error("Failed to create post: "+n.message)}}),I=ie({mutationFn:({postId:n,body:g,userId:U})=>J.createComment(n,g,U),onSuccess:()=>{s.invalidateQueries({queryKey:["posts"]}),re.success("Comment added!")}}),x=ie({mutationFn:({postId:n,userId:g})=>J.toggleLike(n,g),onSuccess:()=>{s.invalidateQueries({queryKey:["posts"]})}}),q=ie({mutationFn:n=>J.deletePost(n),onSuccess:()=>{s.invalidateQueries({queryKey:["posts"]}),re.success("Post deleted")}}),B=ie({mutationFn:n=>J.deleteComment(n),onSuccess:()=>{s.invalidateQueries({queryKey:["posts"]}),re.success("Comment deleted")}}),N=async n=>{n.preventDefault(),!(!t||!i.trim()||!c.trim())&&d.mutate({title:i,body:c,userId:parseInt(t.id)})},W=async(n,g)=>{!t||!g.trim()||I.mutate({postId:parseInt(n),body:g,userId:parseInt(t.id)})},te=async n=>{t&&x.mutate({postId:parseInt(n),userId:parseInt(t.id)})},G=n=>t?e==="root"||e==="developer"?!0:n===t.id.toString():!1,se=async n=>{t&&window.confirm("Are you sure you want to delete this post?")&&q.mutate(parseInt(n))},he=async n=>{t&&B.mutate(parseInt(n))},ae=n=>n.slice(0,2).toUpperCase();return r.jsxs("div",{className:"min-h-screen relative bg-[#0a0f1d]",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-transparent to-purple-500/10 pointer-events-none"}),r.jsx(ut,{}),r.jsxs("div",{className:"pt-32 pb-20 px-6 max-w-4xl mx-auto relative z-10",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-white tracking-tight",children:"Community"}),r.jsx("p",{className:"text-gray-400 mt-2",children:"Connect and share with other quantum explorers"})]}),t&&r.jsxs(ge,{onClick:()=>p(!C),className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 shadow-lg shadow-blue-500/20",children:[r.jsx(bt,{className:"mr-2 h-4 w-4"}),C?"Cancel":"New Post"]})]}),t&&C&&r.jsxs(ve,{className:"bg-slate-900/60 border-slate-700/50 backdrop-blur-md mb-8 overflow-hidden animate-in fade-in slide-in-from-top-4 duration-300",children:[r.jsx("div",{className:"h-1 bg-gradient-to-r from-blue-500 to-purple-600"}),r.jsx(ye,{className:"p-6",children:r.jsxs("form",{onSubmit:N,className:"space-y-4",children:[r.jsx($e,{placeholder:"Catchy Title",value:i,onChange:n=>o(n.target.value),className:"bg-slate-800/50 border-slate-700 text-white placeholder:text-gray-500 focus:ring-blue-500/50"}),r.jsx(ft,{placeholder:"Share your quantum insights...",value:c,onChange:n=>l(n.target.value),className:"bg-slate-800/50 border-slate-700 text-white placeholder:text-gray-500 focus:ring-blue-500/50 min-h-[120px]"}),r.jsx("div",{className:"flex justify-end",children:r.jsxs(ge,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(dt,{className:"mr-2 h-4 w-4"}),"Publish Post"]})})]})})]}),j&&r.jsx("div",{className:"flex justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}),!j&&v.length===0&&r.jsx(ve,{className:"bg-slate-900/40 border-slate-800 border-dashed backdrop-blur-sm py-12",children:r.jsxs(ye,{className:"flex flex-col items-center text-center",children:[r.jsx(Ge,{className:"h-12 w-12 text-slate-700 mb-4"}),r.jsx("p",{className:"text-gray-400 text-lg",children:"No posts yet. Be the first to start a conversation!"})]})}),r.jsx("div",{className:"space-y-6",children:v.map(n=>{var k,H,Pe,Te,Qe,Fe;const g=((k=n.likes)==null?void 0:k.length)??0,U=((H=n.comments)==null?void 0:H.length)??0,S=(n.likes??[]).some(E=>{var _;return E.user_id===((_=t==null?void 0:t.id)==null?void 0:_.toString())}),D=((Pe=n.author)==null?void 0:Pe.name)||((Te=n.author)==null?void 0:Te.email)||"Anonymous";return r.jsx(ve,{className:"bg-slate-900/60 border-slate-800 backdrop-blur-md hover:border-slate-700/50 transition-all duration-300 group",children:r.jsxs(ye,{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(ze,{className:"h-10 w-10 border border-blue-500/20",children:[r.jsx(Ve,{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${D}`}),r.jsx(We,{className:"bg-blue-500/10 text-blue-400 text-xs",children:ae(D)})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-white font-semibold flex items-center gap-2",children:[D,((Qe=n.author)==null?void 0:Qe.role)==="root"&&r.jsx("span",{className:"bg-blue-500/20 text-blue-400 text-[10px] px-1.5 py-0.5 rounded uppercase font-bold tracking-wider",children:"Root"})]}),r.jsx("div",{className:"text-xs text-slate-500",children:n.created_at?new Date(n.created_at).toLocaleDateString():"Recently"})]})]}),G((Fe=n.author)==null?void 0:Fe.id)&&r.jsx(ge,{variant:"ghost",size:"icon",onClick:()=>se(n.id),className:"text-slate-500 hover:text-red-400 hover:bg-red-400/10 h-8 w-8",children:r.jsx(Ct,{className:"h-4 w-4"})})]}),r.jsx("h3",{className:"text-xl font-bold text-white mb-3 group-hover:text-blue-400 transition-colors",children:n.title}),r.jsx("p",{className:"text-slate-300 whitespace-pre-wrap mb-6 leading-relaxed",children:n.body}),r.jsxs("div",{className:"flex items-center gap-6 pt-4 border-t border-slate-800",children:[r.jsxs("button",{onClick:()=>te(n.id),className:`flex items-center gap-2 text-sm transition-colors ${S?"text-red-400":"text-slate-400 hover:text-red-400"}`,children:[r.jsx(gt,{className:`h-5 w-5 ${S?"fill-current":""}`}),r.jsx("span",{className:"font-medium",children:g})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[r.jsx(Ge,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:U})]})]}),r.jsxs("div",{className:"mt-6 space-y-4",children:[n.comments&&n.comments.length>0&&r.jsx("div",{className:"space-y-3 bg-slate-950/40 rounded-xl p-4 border border-slate-800/50",children:n.comments.map(E=>{var _,Ue,De,Le;return r.jsxs("div",{className:"flex gap-3 animate-in fade-in duration-300",children:[r.jsxs(ze,{className:"h-7 w-7 mt-0.5",children:[r.jsx(Ve,{src:`https://api.dicebear.com/7.x/bottts/svg?seed=${((_=E.author)==null?void 0:_.name)||"anon"}`}),r.jsx(We,{className:"text-[10px]",children:ae(((Ue=E.author)==null?void 0:Ue.name)||"??")})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs font-bold text-blue-400",children:((De=E.author)==null?void 0:De.name)||"Anonymous"}),G((Le=E.author)==null?void 0:Le.id)&&r.jsx("button",{onClick:()=>he(E.id),className:"text-[10px] text-slate-600 hover:text-red-400 uppercase font-bold",children:"Delete"})]}),r.jsx("p",{className:"text-sm text-slate-300 mt-0.5",children:E.body})]})]},E.id)})}),t&&r.jsxs("div",{className:"relative",children:[r.jsx($e,{placeholder:"Write a supportive comment...",className:"bg-slate-800/30 border-slate-700/50 text-white text-sm pr-12 focus:ring-blue-500/30 h-10 rounded-lg",onKeyDown:E=>{if(E.key==="Enter"){E.preventDefault();const _=E.target;_.value.trim()&&(W(n.id,_.value),_.value="")}}}),r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] uppercase font-bold text-slate-600 pointer-events-none",children:"Enter"})]})]})]})},n.id)})})]}),r.jsx(mt,{})]})};export{Bt as default};
