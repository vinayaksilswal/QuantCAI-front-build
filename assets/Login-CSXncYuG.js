import{r as s,ap as k,d as E,j as e,N as A,C as q,a as F,a5 as m,k as b,F as I}from"./index-BhfWv0VC.js";const G=()=>{const[o,f]=s.useState(""),[c,v]=s.useState(""),[u,j]=s.useState(""),[d,n]=s.useState(!1),[a,x]=s.useState("signin"),[h,l]=s.useState(null),i=k(),{role:g,user:p,login:N,register:w}=E();s.useEffect(()=>{p&&(g==="root"?i("/admin",{replace:!0}):g==="developer"?i("/developer",{replace:!0}):i("/",{replace:!0}))},[p,g,i]);const y=async t=>{t.preventDefault(),n(!0),l(null);try{if(a==="signin")await N(o,c);else{if(!u.trim()){l("Username is required for registration"),n(!1);return}await w(o,c,u)}}catch(r){console.error("Login error:",r);const S=(r==null?void 0:r.message)||(typeof r=="string"?r:"Authentication failed. Please try again.");l(S)}finally{n(!1)}},C=async()=>{n(!0),l(null),l("Google OAuth is not yet implemented in the backend."),n(!1)};return e.jsxs("div",{className:"min-h-screen relative",children:[e.jsx(A,{}),e.jsx("div",{className:"pt-32 pb-20 px-6 max-w-md mx-auto w-full",children:e.jsx(q,{className:"bg-slate-800/50 border-slate-700/50 backdrop-blur-sm",children:e.jsxs(F,{className:"p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:a==="signin"?"Log In":"Create Account"}),h&&e.jsx("div",{className:"mb-4 text-sm text-red-300",children:h}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[a==="signup"&&e.jsx(m,{type:"text",placeholder:"Username",value:u,onChange:t=>j(t.target.value),className:"bg-slate-800/50 border-slate-600 text-white",required:!0}),e.jsx(m,{type:"email",placeholder:"Email",value:o,onChange:t=>f(t.target.value),className:"bg-slate-800/50 border-slate-600 text-white",required:!0}),e.jsx(m,{type:"password",placeholder:"Password",value:c,onChange:t=>v(t.target.value),className:"bg-slate-800/50 border-slate-600 text-white",required:!0}),e.jsx(b,{disabled:d,type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:d?a==="signin"?"Signing in…":"Creating…":a==="signin"?"Sign In":"Sign Up"})]}),e.jsx("div",{className:"my-4 h-px bg-slate-700"}),e.jsx(b,{disabled:d,onClick:C,className:"w-full bg-white text-black hover:bg-slate-200",children:"Continue with Google"}),e.jsx("div",{className:"mt-4 text-sm text-gray-300",children:a==="signin"?e.jsxs(e.Fragment,{children:["Don't have an account?"," ",e.jsx("button",{onClick:()=>x("signup"),className:"text-blue-300 hover:text-blue-200",children:"Sign up"})]}):e.jsxs(e.Fragment,{children:["Already have an account?"," ",e.jsx("button",{onClick:()=>x("signin"),className:"text-blue-300 hover:text-blue-200",children:"Sign in"})]})})]})})}),e.jsx(I,{})]})};export{G as default};
