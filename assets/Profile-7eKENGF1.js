import{c as b,j as e,x as N,z as v,d as y,r as i,N as w,C as d,a as c,aq as k,g as n,B as _,h as o,F as C}from"./index-kKgKvGca.js";import{A as S,a as A,b as E}from"./avatar-BCaCqlfA.js";import{s as M}from"./supabase-2KmmmEai.js";import{S as I}from"./shield-BLVl5gK5.js";import"./index-CpptMc8w.js";import"./tslib.es6-CmEaCU22.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],B=b("bell",L);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],h=b("calendar",P),U=v("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function $({className:s,variant:a,...r}){return e.jsx("div",{className:N(U({variant:a}),s),...r})}const q="http://localhost:8000",O=()=>{const{user:s,role:a}=y(),[r,f]=i.useState([]),[x,m]=i.useState([]),[g,p]=i.useState(!1);i.useEffect(()=>{(async()=>{if(!s)return;const{data:l}=await M.from("page_progress").select("page_key, read_at").eq("user_id",s.id).order("read_at",{ascending:!1});f(l??[])})()},[s]),i.useEffect(()=>{(async()=>{if(a==="root")try{p(!0);const l=await fetch(`${q}/api/notify`);if(!l.ok)throw new Error("failed");const j=await l.json();m(j??[])}catch{m([])}finally{p(!1)}})()},[a]);const u=t=>t.slice(0,2).toUpperCase();return e.jsxs("div",{className:"min-h-screen relative bg-[#0a0f1d]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-500/5 via-transparent to-purple-500/5 pointer-events-none"}),e.jsx(w,{}),e.jsxs("div",{className:"pt-32 pb-20 px-6 max-w-4xl mx-auto relative z-10",children:[e.jsxs(d,{className:"bg-slate-900/60 border-slate-800 backdrop-blur-md mb-8 overflow-hidden",children:[e.jsx("div",{className:"h-32 bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-blue-600/20 relative",children:e.jsx("div",{className:"absolute inset-0 opacity-30 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"})}),e.jsx(c,{className:"p-8 -mt-16 relative",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-end gap-6",children:[e.jsxs(S,{className:"h-32 w-32 border-4 border-[#0a0f1d] shadow-2xl",children:[e.jsx(A,{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${(s==null?void 0:s.name)||"User"}`}),e.jsx(E,{className:"bg-slate-800 text-3xl font-bold text-blue-400",children:s!=null&&s.name?u(s.name):e.jsx(k,{className:"h-12 w-12"})})]}),e.jsxs("div",{className:"flex-1 text-center md:text-left pb-2",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-white tracking-tight",children:(s==null?void 0:s.name)||"Quantum Explorer"}),e.jsx($,{className:`w-fit mx-auto md:mx-0 ${a==="root"?"bg-blue-500 hover:bg-blue-600":"bg-slate-700"}`,children:(a==null?void 0:a.toUpperCase())||"USER"})]}),e.jsxs("p",{className:"text-slate-400 mt-1 flex items-center justify-center md:justify-start gap-2",children:[e.jsx(I,{className:"h-3.5 w-3.5"}),s==null?void 0:s.email]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-2 space-y-8",children:[e.jsxs(d,{className:"bg-slate-900/60 border-slate-800 backdrop-blur-md",children:[e.jsxs(n,{className:"flex flex-row items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-400",children:e.jsx(_,{className:"h-5 w-5"})}),e.jsx(o,{className:"text-xl text-white",children:"Learning Progress"})]}),e.jsx(c,{children:r.length===0?e.jsx("div",{className:"text-slate-500 py-4 text-center border-2 border-dashed border-slate-800 rounded-xl",children:"No pages marked as read yet. Start your journey in the Learn section!"}):e.jsx("div",{className:"space-y-3",children:r.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-slate-800/30 border border-slate-700/50 hover:bg-slate-800/50 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]"}),e.jsx("span",{className:"text-slate-200 font-medium capitalize",children:t.page_key.replace(/-/g," ")})]}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(h,{className:"h-3 w-3"}),new Date(t.read_at).toLocaleDateString()]})]},t.page_key))})})]}),a==="root"&&e.jsxs(d,{className:"bg-slate-900/60 border-slate-800 backdrop-blur-md",children:[e.jsxs(n,{className:"flex flex-row items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500/10 text-purple-400",children:e.jsx(B,{className:"h-5 w-5"})}),e.jsx(o,{className:"text-xl text-white",children:"Notify Me Requests"})]}),e.jsx(c,{children:g?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-500"})}):x.length===0?e.jsx("div",{className:"text-slate-500 py-4 text-center border-2 border-dashed border-slate-800 rounded-xl",children:"No requests yet."}):e.jsx("div",{className:"space-y-4",children:x.map(t=>e.jsxs("div",{className:"p-4 rounded-xl bg-slate-950/40 border border-slate-800/50 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-purple-400 font-bold text-sm tracking-tight",children:t.email}),e.jsxs("span",{className:"text-[10px] text-slate-600 font-mono",children:["ID: ",t.id]})]}),e.jsxs("p",{className:"text-slate-300 text-sm italic",children:['"',t.message,'"']}),t.created_at&&e.jsxs("div",{className:"text-[10px] text-slate-500 mt-2 flex items-center gap-1",children:[e.jsx(h,{className:"h-3 w-3"}),new Date(t.created_at).toLocaleString()]})]},t.id))})})]})]}),e.jsx("div",{className:"space-y-8",children:e.jsxs(d,{className:"bg-slate-900/60 border-slate-800 backdrop-blur-md",children:[e.jsx(n,{children:e.jsx(o,{className:"text-sm uppercase tracking-widest text-slate-500",children:"Account Stats"})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-800",children:[e.jsx("span",{className:"text-slate-400 text-sm",children:"Completed Modules"}),e.jsx("span",{className:"text-white font-bold",children:r.length})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-800",children:[e.jsx("span",{className:"text-slate-400 text-sm",children:"Community Rank"}),e.jsx("span",{className:"text-blue-400 font-bold",children:"Initiate"})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx("div",{className:"w-full bg-slate-800 h-1.5 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-blue-500 h-full rounded-full shadow-[0_0_10px_rgba(59,130,246,0.5)]",style:{width:`${Math.min(r.length*10,100)}%`}})}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-2 uppercase font-bold tracking-tighter text-right",children:"Progress to next rank"})]})]})]})})]})]}),e.jsx(C,{})]})};export{O as default};
